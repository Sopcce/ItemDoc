@using Sop.Core.Mvc.SystemMessage
@model UsersLoginViewModel
@{
    ViewBag.Title = "注册页面";
    var systemMessageData = ViewData.Get<SystemMessageData>("msg", new SystemMessageData(SystemMessageType.Success, "ok"));
}
@section heads
{
    <style type="text/css">
        body {
            padding-top: 40px;
            padding-bottom: 40px;
            background-color: #eee;
        }

        .form-signin {
            max-width: 60%;
            margin: 0 auto;
        }

        .checkcodeimg {
            cursor: pointer;
            width: 76px;
            background-size: 100% 100%;
            -moz-background-size: 100% 100%;
        }
    </style>

}
@section scripts {

    <script src="~/assets/jquery.validate/jquery.validate.min.js"></script>
    <script src="~/assets/jquery.validate/jquery.validate.unobtrusive.js"></script>
    <script type="text/javascript">
        $(function() {
            $(".checkcodeimg").css("background-image", "url('@SiteUrls.Instance().UserCaptchaCode()" +
                "?v=" +Math.random() +")no-repeat center top");

            $(".checkcodeimg,.checkImgRefresh").on("click",
                function() {
                    $(".checkcodeimg").css("background-image", "url('@SiteUrls.Instance().UserCaptchaCode()" +
                        "?v=" +
                        Math.random() +
                        ")no-repeat center top");

                });

            if ('@systemMessageData.Type' === '@SystemMessageType.Error') {
                layer.msg('@systemMessageData.Content', { autoHeight: true });
            }
        });
    </script>

}

<div class="form-signin">
    <div class="">
        @using (Html.BeginForm("Login", "User", FormMethod.Post, new { @class = "form-horizontal" }))
        {
            @Html.AntiForgeryToken()
            <p class="">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            </p>
            <div class="form-group">
                <label for="UserLoginName" class="col-sm-4 control-label">账号：</label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(n => n.UserName, new { @class = "form-control", placeholder = "UserName" })
                </div>
            </div>
            <div class="form-group">
                <label for="UserLoginPassWord" class="col-sm-4 control-label">密码：</label>

                <div class="col-sm-8">
                    @Html.PasswordFor(n => n.PassWord, new { @class = "form-control", @placeholder = "Password" })

                </div>
            </div>
            <div class="form-group">

                <label for="UserLoginCaptchaCode" class="col-sm-4 control-label">验证码：</label>

                <div class="col-sm-8">
                    <div class="input-group">
                        <div class="input-group-addon checkcodeimg" title="点击换一换">
                        </div>
                        @Html.TextBoxFor(n => n.CaptchaCode, new { minlength = "1", maxlength = "4", @class = "form-control", placeholder = "输入验证码", required = "required" })
                        <div class="input-group-addon checkImgRefresh" style="cursor: pointer;">刷新</div>
                    </div>



                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default">Sign in</button>
                </div>
            </div>

        }

    </div>
</div>





